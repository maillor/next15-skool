

Voici la liste compl√®te des endpoints de l'API avec leurs r√¥les, organis√©s par fonctionnalit√© :

### üîê **Authentification (Clerk Integration)**
| M√©thode | Endpoint | R√¥le |
|---------|----------|------|
| `POST` | `/webhooks/clerk` | R√©ception des webhooks Clerk (cr√©ation/mise √† jour/suppression utilisateurs) |
| `GET` | `/auth/me` | R√©cup√©rer les infos de l'utilisateur connect√© |
| `POST` | `/auth/sync` | Synchroniser manuellement un utilisateur avec Clerk |
| `DELETE` | `/auth/logout` | D√©connexion de l'utilisateur |

### üë• **Utilisateurs**
| M√©thode | Endpoint | R√¥le |
|---------|----------|------|
| `GET` | `/users` | Lister tous les utilisateurs (admin) |
| `GET` | `/users/{id}` | R√©cup√©rer un utilisateur par ID |
| `PUT` | `/users/{id}` | Mettre √† jour le profil utilisateur |
| `PUT` | `/users/{id}/preferences` | Mettre √† jour les pr√©f√©rences vid√©o |
| `GET` | `/users/{id}/communities` | Lister les communaut√©s d'un utilisateur |

### üèòÔ∏è **Communaut√©s**
| M√©thode | Endpoint | R√¥le |
|---------|----------|------|
| `GET` | `/communities` | Lister toutes les communaut√©s |
| `POST` | `/communities` | Cr√©er une nouvelle communaut√© |
| `GET` | `/communities/{id}` | R√©cup√©rer une communaut√© par ID |
| `PUT` | `/communities/{id}` | Mettre √† jour une communaut√© |
| `DELETE` | `/communities/{id}` | Supprimer une communaut√© |
| `GET` | `/communities/{id}/members` | Lister les membres d'une communaut√© |
| `POST` | `/communities/{id}/join` | Rejoindre une communaut√© |
| `DELETE` | `/communities/{id}/leave` | Quitter une communaut√© |
| `PUT` | `/communities/{id}/members/{userId}/role` | Modifier le r√¥le d'un membre |

### üìö **Cours**
| M√©thode | Endpoint | R√¥le |
|---------|----------|------|
| `GET` | `/courses` | Lister tous les cours |
| `POST` | `/courses` | Cr√©er un nouveau cours |
| `GET` | `/courses/{id}` | R√©cup√©rer un cours par ID |
| `PUT` | `/courses/{id}` | Mettre √† jour un cours |
| `DELETE` | `/courses/{id}` | Supprimer un cours |
| `GET` | `/communities/{id}/courses` | Lister les cours d'une communaut√© |
| `POST` | `/courses/{id}/publish` | Publier un cours |
| `POST` | `/courses/{id}/archive` | Archiver un cours |

### üìñ **Modules**
| M√©thode | Endpoint | R√¥le |
|---------|----------|------|
| `GET` | `/courses/{courseId}/modules` | Lister les modules d'un cours |
| `POST` | `/courses/{courseId}/modules` | Cr√©er un nouveau module |
| `PUT` | `/modules/{id}` | Mettre √† jour un module |
| `DELETE` | `/modules/{id}` | Supprimer un module |
| `PUT` | `/modules/{id}/reorder` | R√©organiser les modules |

### üéØ **Le√ßons**
| M√©thode | Endpoint | R√¥le |
|---------|----------|------|
| `GET` | `/modules/{moduleId}/lessons` | Lister les le√ßons d'un module |
| `POST` | `/modules/{moduleId}/lessons` | Cr√©er une nouvelle le√ßon |
| `GET` | `/lessons/{id}` | R√©cup√©rer une le√ßon par ID |
| `PUT` | `/lessons/{id}` | Mettre √† jour une le√ßon |
| `DELETE` | `/lessons/{id}` | Supprimer une le√ßon |
| `PUT` | `/lessons/{id}/reorder` | R√©organiser les le√ßons |
| `POST` | `/lessons/{id}/complete` | Marquer une le√ßon comme termin√©e |

### üí≥ **Paiements (Moneroo)**
| M√©thode | Endpoint | R√¥le |
|---------|----------|------|
| `POST` | `/payments/initiate` | Initier un paiement Moneroo |
| `GET` | `/payments/{id}` | R√©cup√©rer les d√©tails d'un paiement |
| `GET` | `/users/{userId}/payments` | Lister les paiements d'un utilisateur |
| `POST` | `/payments/{id}/refund` | Rembourser un paiement |
| `POST` | `/webhooks/moneroo` | R√©ception des webhooks Moneroo |
| `GET` | `/payment-methods` | Lister les m√©thodes de paiement disponibles |

### üìù **Inscriptions**
| M√©thode | Endpoint | R√¥le |
|---------|----------|------|
| `GET` | `/enrollments` | Lister toutes les inscriptions |
| `POST` | `/courses/{courseId}/enroll` | S'inscrire √† un cours |
| `GET` | `/users/{userId}/enrollments` | Lister les inscriptions d'un utilisateur |
| `GET` | `/courses/{courseId}/enrollments` | Lister les inscrits √† un cours |
| `DELETE` | `/enrollments/{id}` | Annuler une inscription |
| `GET` | `/enrollments/{id}/progress` | R√©cup√©rer la progression d'une inscription |

### üí¨ **Discussions**
| M√©thode | Endpoint | R√¥le |
|---------|----------|------|
| `GET` | `/communities/{id}/discussions` | Lister les discussions d'une communaut√© |
| `POST` | `/communities/{id}/discussions` | Cr√©er une nouvelle discussion |
| `GET` | `/discussions/{id}` | R√©cup√©rer une discussion par ID |
| `PUT` | `/discussions/{id}` | Mettre √† jour une discussion |
| `DELETE` | `/discussions/{id}` | Supprimer une discussion |
| `PUT` | `/discussions/{id}/pin` | √âpingler/d√©s√©pingler une discussion |
| `POST` | `/discussions/{id}/comments` | Ajouter un commentaire √† une discussion |

### üí≠ **Commentaires**
| M√©thode | Endpoint | R√¥le |
|---------|----------|------|
| `GET` | `/discussions/{id}/comments` | Lister les commentaires d'une discussion |
| `POST` | `/discussions/{id}/comments` | Cr√©er un nouveau commentaire |
| `GET` | `/comments/{id}` | R√©cup√©rer un commentaire par ID |
| `PUT` | `/comments/{id}` | Mettre √† jour un commentaire |
| `DELETE` | `/comments/{id}` | Supprimer un commentaire |
| `GET` | `/comments/{id}/replies` | Lister les r√©ponses √† un commentaire |

### üé• **Visioconf√©rence**
| M√©thode | Endpoint | R√¥le |
|---------|----------|------|
| `GET` | `/video/sessions` | Lister toutes les sessions vid√©o |
| `POST` | `/video/sessions` | Cr√©er une nouvelle session vid√©o |
| `GET` | `/video/sessions/{id}` | R√©cup√©rer une session vid√©o par ID |
| `PUT` | `/video/sessions/{id}` | Mettre √† jour une session vid√©o |
| `DELETE` | `/video/sessions/{id}` | Supprimer une session vid√©o |
| `POST` | `/video/sessions/{id}/start` | D√©marrer une session vid√©o |
| `POST` | `/video/sessions/{id}/end` | Terminer une session vid√©o |
| `GET` | `/video/sessions/{code}/join` | Rejoindre une session par code |
| `POST` | `/video/sessions/{id}/invite` | Inviter des participants |
| `GET` | `/video/sessions/{id}/participants` | Lister les participants d'une session |
| `POST` | `/video/sessions/{id}/recording/start` | D√©marrer l'enregistrement |
| `POST` | `/video/sessions/{id}/recording/stop` | Arr√™ter l'enregistrement |
| `GET` | `/video/recordings` | Lister tous les enregistrements |
| `GET` | `/video/recordings/{id}` | R√©cup√©rer un enregistrement par ID |
| `GET` | `/video/recordings/{id}/download` | T√©l√©charger un enregistrement |
| `GET` | `/communities/{id}/video-sessions` | Lister les sessions vid√©o d'une communaut√© |
| `GET` | `/courses/{id}/video-sessions` | Lister les sessions vid√©o d'un cours |

### üîî **Notifications Vid√©o**
| M√©thode | Endpoint | R√¥le |
|---------|----------|------|
| `GET` | `/video/notifications` | Lister les notifications vid√©o d'un utilisateur |
| `POST` | `/video/notifications/{id}/read` | Marquer une notification comme lue |
| `GET` | `/video/sessions/{id}/notifications` | Lister les notifications d'une session |
| `POST` | `/video/sessions/{id}/notify` | Envoyer des notifications aux membres |

### ‚öôÔ∏è **Configuration Syst√®me**
| M√©thode | Endpoint | R√¥le |
|---------|----------|------|
| `GET` | `/webrtc/servers` | Lister les serveurs WebRTC configur√©s |
| `POST` | `/webrtc/servers` | Ajouter un serveur WebRTC |
| `PUT` | `/webrtc/servers/{id}` | Mettre √† jour un serveur WebRTC |
| `DELETE` | `/webrtc/servers/{id}` | Supprimer un serveur WebRTC |
| `GET` | `/system/health` | V√©rifier l'√©tat du syst√®me |
| `GET` | `/system/stats` | R√©cup√©rer les statistiques du syst√®me |

### üìä **Analytics & Rapports**
| M√©thode | Endpoint | R√¥le |
|---------|----------|------|
| `GET` | `/analytics/courses` | Statistiques des cours |
| `GET` | `/analytics/users` | Statistiques des utilisateurs |
| `GET` | `/analytics/payments` | Statistiques des paiements |
| `GET` | `/analytics/video-sessions` | Statistiques des sessions vid√©o |
| `GET` | `/reports/engagement` | Rapport d'engagement des utilisateurs |
| `GET` | `/reports/revenue` | Rapport de revenus |

### üîç **Recherche**
| M√©thode | Endpoint | R√¥le |
|---------|----------|------|
| `GET` | `/search/courses` | Rechercher des cours |
| `GET` | `/search/communities` | Rechercher des communaut√©s |
| `GET` | `/search/users` | Rechercher des utilisateurs |
| `GET` | `/search/discussions` | Rechercher des discussions |

### üìÅ **Gestion des Fichiers**
| M√©thode | Endpoint | R√¥le |
|---------|----------|------|
| `POST` | `/upload/avatar` | T√©l√©charger un avatar |
| `POST` | `/upload/course-image` | T√©l√©charger une image de cours |
| `POST` | `/upload/video-thumbnail` | T√©l√©charger une miniature vid√©o |
| `DELETE` | `/files/{id}` | Supprimer un fichier |

### üîå **WebSocket Endpoints (Signalisation Vid√©o)**
| √âv√©nement | R√¥le |
|-----------|------|
| `join` | Rejoindre une salle vid√©o |
| `leave` | Quitter une salle vid√©o |
| `offer` | Envoyer une offre WebRTC |
| `answer` | Envoyer une r√©ponse WebRTC |
| `ice-candidate` | √âchanger les candidats ICE |
| `start-recording` | D√©marrer l'enregistrement |
| `stop-recording` | Arr√™ter l'enregistrement |
| `chat-message` | Envoyer un message de chat |
| `raise-hand` | Lever la main |
| `screen-share` | Partager l'√©cran |

### üõ°Ô∏è **Endpoints Admin**
| M√©thode | Endpoint | R√¥le |
|---------|----------|------|
| `GET` | `/admin/users` | Lister tous les utilisateurs (admin) |
| `PUT` | `/admin/users/{id}/status` | Activer/d√©sactiver un utilisateur |
| `GET` | `/admin/communities` | Lister toutes les communaut√©s (admin) |
| `DELETE` | `/admin/communities/{id}` | Supprimer une communaut√© (admin) |
| `GET` | `/admin/payments` | Lister tous les paiements (admin) |
| `POST` | `/admin/system/maintenance` | Activer le mode maintenance |
| `GET` | `/admin/logs` | Consulter les logs syst√®me |

Cette structure d'API couvre toutes les fonctionnalit√©s de la plateforme avec une organisation claire et des r√¥les bien d√©finis pour chaque endpoint.
